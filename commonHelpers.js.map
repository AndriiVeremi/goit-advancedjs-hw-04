{"version":3,"file":"commonHelpers.js","sources":["../src/js/pixaAPI.js","../src/js/markupGallery.js","../src/js/showElement.js","../src/js/scrollPage.js","../src/main.js"],"sourcesContent":["import axios from 'axios';\n\nconst URL = 'https://pixabay.com/api/';\n\nexport default async function getImage(query, page) {\n  try {\n    const resp = await axios.get(URL, {\n      params: {\n        key: '34554984-68074c5646cb7a45ce2c04cbc',\n        q: query,\n        image_type: 'photo',\n        orientation: 'horizontal',\n        safesearch: 'true',\n        per_page: '40',\n        page: page,\n      },\n    });\n    return resp;\n  } catch (error) {\n    console.log(error);\n  }\n}\n","export default function markupGallery(data) {\n  return data\n    .map(\n      ({\n        webformatURL,\n        largeImageURL,\n        tags,\n        likes,\n        views,\n        comments,\n        downloads,\n      }) => `\n    <a href=\"${largeImageURL}\" class=\"card-link js-card-link\">\n     <div class=\"photo-card\">\n      <img src=\"${webformatURL}\" class=\"card-img\"  alt=\"${tags}\" loading=\"lazy\" />\n       <div class=\"info\">\n        <p class=\"info-item\">\n            <b>Likes: ${likes}</b>\n        </p>\n        <p class=\"info-item\">\n        <b>Views: ${views}</b>\n        </p>\n        <p class=\"info-item\">\n            <b>Comments: ${comments}</b>\n        </p>\n        <p class=\"info-item\">\n            <b>Downloads: ${downloads}</b>\n        </p>\n    </div>\n</div>\n</a>`\n    )\n    .join('');\n}\n","export default function showElement(element, isVisible) {\n  element.classList.toggle('hidden', !isVisible);\n}","export default function scrollPage() {\n  const { height: cardHeight } = document\n    .querySelector('.gallery')\n    .firstElementChild.getBoundingClientRect();\n\n  window.scrollBy({\n    top: cardHeight * 2,\n    behavior: 'smooth',\n  });\n}","import SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport getImage from './js/pixaAPI';\nimport markupGallery from './js/markupGallery';\nimport showElement from './js/showElement';\nimport scrollPage from './js/scrollPage';\n\nconst refs = {\n  form: document.querySelector('#search-form'),\n  input: document.querySelector('input'),\n  gallery: document.querySelector('.gallery'),\n  loadBtn: document.querySelector('.js-load-btn'),\n  logo: document.querySelector('.js-pixa'),\n};\n\nrefs.form.addEventListener('submit', handleSearch);\nrefs.loadBtn.addEventListener('click', handleLoadMore);\n\nshowElement(refs.loadBtn, false);\nshowElement(refs.logo, true);\n\nconst onImages = new SimpleLightbox('.js-gallery a', {\n  captionDelay: 250,\n  captionsData: 'alt',\n});\n\nlet currentQuery = '';\nlet page = 1;\n\nfunction clearPage() {\n  refs.gallery.innerHTML = '';\n  page = 1;\n}\n\nasync function handleSearch(e) {\n  e.preventDefault();\n  showElement(refs.loadBtn, false);\n  const query = refs.input.value.trim().toLowerCase();\n\n  if (!query) {\n    iziToast.show({\n      title: 'Ops!',\n      message: 'Enter something to search!',\n      position: 'topRight',\n    });\n    return;\n  }\n\n  if (currentQuery === query) {\n    iziToast.show({\n      title: 'Sorry!',\n      message: 'Rewrite your requests, write something different.!',\n      position: 'topRight',\n    });\n    return;\n  }\n\n  currentQuery = query;\n\n  clearPage();\n\n  try {\n    const data = await getImage(currentQuery, page);\n\n    const allCollection = data.data.totalHits;\n    const collection = data.data.hits;\n\n    if (allCollection === 0) {\n      showElement(refs.loadBtn, false);\n      showElement(refs.logo, true);\n      iziToast.show({\n        title: 'Ops!',\n        message: \"We're sorry, but you've reached the end of search results.\",\n        position: 'topRight',\n      });\n      return;\n    }\n\n    showElement(refs.logo, false);\n\n    refs.gallery.insertAdjacentHTML('afterbegin', markupGallery(collection));\n\n    iziToast.show({\n      title: 'Hooray!',\n      message: `We found ${allCollection} images.`,\n      position: 'topRight',\n    });\n\n    showElement(refs.loadBtn, true);\n    onImages.refresh();\n  } catch (err) {\n    console.log(err);\n    clearPage();\n    showElement(refs.logo, true);\n  }\n}\n\nasync function handleLoadMore(e) {\n  e.preventDefault();\n\n  page += 1;\n\n  try {\n    const data = await getImage(currentQuery, page);\n    const collection = data.data.hits;\n    const allCollection = data.data.totalHits;\n\n    if (!(page < Math.ceil(allCollection / 40))) {\n      iziToast.show({\n        message: \"We're sorry, but you've reached the end of search results.\",\n        position: 'topRight',\n      });\n      showElement(refs.loadBtn, false);\n    }\n\n    refs.gallery.insertAdjacentHTML('beforeend', markupGallery(collection));\n    scrollPage();\n    onImages.refresh();\n  } catch (err) {\n    console.log(err);\n    clearPage();\n    showElement(refs.logo, true);\n  }\n}\n"],"names":["URL","getImage","query","page","axios","error","markupGallery","data","webformatURL","largeImageURL","tags","likes","views","comments","downloads","showElement","element","isVisible","scrollPage","cardHeight","refs","handleSearch","handleLoadMore","onImages","SimpleLightbox","currentQuery","clearPage","e","iziToast","allCollection","collection","err"],"mappings":"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"}